---
title: Work Shift Module
---

# Work Shift Module

## Overview

The Work Shift module manages company-level shift definitions (start/end time, code, and active status). All endpoints are scoped to the authenticated user's company and require the `company_admin` or `hr_manager` role.

### Features

- ✅ Create shifts with name, code, and time range
- ✅ List shifts with search, filters, and pagination
- ✅ Get shift by ID
- ✅ Update shift details
- ✅ Delete shift (blocked if employees are assigned)
- ✅ Company-scoped access control

---

## Endpoints

All endpoints are prefixed with `/company/workshifts` and require `company_admin` or `hr_manager`.

### 1. Create Work Shift

**POST** `/company/workshifts`

- **Description**: Creates a new work shift under your company (companyId auto-assigned from JWT token)
- **Access**: Company Admin / HR Manager only
- **Request Body**:
  ```json
  {
    "name": "Morning Shift",
    "code": "MS",
    "description": "Morning shift from 9 AM to 5 PM",
    "startTime": "09:00:00",
    "endTime": "17:00:00",
    "isActive": true
  }
  ```
- **Response** (201 Created):
  ```json
  {
    "message": "Work shift created successfully",
    "data": {
      "id": "uuid",
      "name": "Morning Shift",
      "code": "MS",
      "description": "Morning shift from 9 AM to 5 PM",
      "startTime": "1970-01-01T09:00:00.000Z",
      "endTime": "1970-01-01T17:00:00.000Z",
      "isActive": true,
      "companyId": "company-uuid",
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z"
    }
  }
  ```
- **Validation & Rules**:
  - `startTime` and `endTime` must be **HH:mm** or **HH:mm:ss** (24-hour).
  - `startTime` and `endTime` must be **different**.
  - `name` must be unique within your company.
  - `code` must be unique within your company (if provided).
  - Company must be **active** (not suspended/archived).
- **Errors**:
  - `400 Bad Request`: Validation failed or company is suspended/archived
  - `401 Unauthorized`
  - `403 Forbidden`: Role not allowed
  - `409 Conflict`: Name or code already exists

### 2. List Work Shifts

**GET** `/company/workshifts`

- **Description**: Returns a paginated list of work shifts from your company
- **Query Parameters**:
  - `search` (optional): Search in name, code, or description
  - `isActive` (optional): Filter by active status (`true`/`false`)
  - `page` (optional): Page number (default: 1)
  - `limit` (optional): Items per page (default: 10, max: 100)
  - `sortBy` (optional): `createdAt`, `name`, `code`, `startTime`, `endTime`, `updatedAt`
  - `sortOrder` (optional): `asc` or `desc`
- **Response** (200 OK):
  ```json
  {
    "message": "Work shifts retrieved successfully",
    "data": [
      {
        "id": "uuid",
        "name": "Morning Shift",
        "code": "MS",
        "description": "Morning shift from 9 AM to 5 PM",
        "startTime": "1970-01-01T09:00:00.000Z",
        "endTime": "1970-01-01T17:00:00.000Z",
        "isActive": true,
        "companyId": "company-uuid",
        "createdAt": "2024-01-01T00:00:00.000Z",
        "updatedAt": "2024-01-01T00:00:00.000Z"
      }
    ],
    "meta": {
      "total": 10,
      "page": 1,
      "limit": 10,
      "totalPages": 1,
      "hasNextPage": false,
      "hasPreviousPage": false
    }
  }
  ```

### 3. Get Work Shift by ID

**GET** `/company/workshifts/:id`

- **Description**: Returns a specific work shift
- **Parameters**: `id` (UUID)
- **Errors**:
  - `403 Forbidden`: Work shift does not belong to your company
  - `404 Not Found`: Work shift not found

### 4. Update Work Shift

**PATCH** `/company/workshifts/:id`

- **Description**: Updates work shift details
- **Request Body** (all fields optional):
  ```json
  {
    "name": "Evening Shift",
    "code": "ES",
    "description": "Updated description",
    "startTime": "13:00:00",
    "endTime": "21:00:00",
    "isActive": true
  }
  ```
- **Rules**:
  - Unique name/code enforced if changed.
  - `startTime` and `endTime` must be valid and different.
- **Errors**:
  - `400 Bad Request`: Validation failed
  - `403 Forbidden`: Work shift does not belong to your company
  - `404 Not Found`
  - `409 Conflict`: Name or code already exists

### 5. Delete Work Shift

**DELETE** `/company/workshifts/:id`

- **Description**: Deletes a work shift
- **Restrictions**:
  - Cannot delete if employees are assigned to the shift.
- **Errors**:
  - `400 Bad Request`: Employees are assigned to this shift
  - `403 Forbidden`: Work shift does not belong to your company
  - `404 Not Found`

---

## Access Control

- **Roles**: `company_admin`, `hr_manager`
- **Scope**: Company-only (companyId taken from JWT)
